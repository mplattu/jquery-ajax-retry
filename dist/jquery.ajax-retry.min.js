(function(b){"function"===typeof define&&define.amd?define(["jquery"],b):"object"===typeof exports?b(require("jquery")):b(jQuery)})(function(b){function h(d,c){var e=c.times,a=d.timeout;return function(h,m,n){function k(){if("function"==typeof c.onRetry)c.onRetry();b.ajax(l).retry({times:e-1,timeout:c.timeout,statusCodes:c.statusCodes,onRetry:c.onRetry}).pipe(f.resolve,f.reject)}var l=this,f=new b.Deferred,g=d.getResponseHeader("Retry-After");if(1<e&&(!d.statusCodes||-1<b.inArray(h.status,d.statusCodes))){if(g&&
(a=isNaN(g)?(new Date(g)).getTime()-b.now():1E3*parseInt(g,10),isNaN(a)||0>a))a=d.timeout;void 0!==a?setTimeout(k,a):k()}else f.rejectWith(this,arguments);return f}}b.ajaxPrefilter(function(b,c,e){e.retry=function(a){a.timeout&&(this.timeout=a.timeout);a.statusCodes&&(this.statusCodes=a.statusCodes);a.onRetry&&(this.onRetry=a.onRetry);return this.pipe(null,h(this,a))}})});
